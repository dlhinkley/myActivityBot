<!doctype html>
<html>
    <head>
        <title>Eureca.io test</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
		<script src="/eureca.js"></script>
    </head>
    <body>
        Status: <input type="text" name="status" value="" id="status">
        <p>
        Ping: <input size=5 type="text" name="ping" value="" id="ping">
        <p>    
        X: <input size=5 type="text" name="x" value="" id="x">
        Y: <input size=5 type="text" name="y" value="" id="y">
        
        Heading: <input size=5 type="text" name="heading" value="" id="heading">
        Turet: <input size=5 type="text" name="turet" value="" id="turet">
        <p>
        <div id="direction-container">
            <div id="direction-stop-container" style="float:left;">
                <div style="position:relative; width: 200px; height:220px; background: url('images/control.jpg') 200px 0px;">
                  <div id="upArrow" style="position:absolute; left:75px; top: 10px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.up()"></div>
                  <div id="downArrow" style="position:absolute; left:75px; top: 145px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.down()"></div>
                  <div id="leftArrow" style="position:absolute; left:10px; top: 75px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.left()"></div>
                  <div id="rightArrow" style="position:absolute; left:135px; top: 79px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.right()"></div>
                </div>
                <div id="stop" style="position:relative; width: 210px; height:110px; background: url('images/control.jpg') -225px 0px; cursor: pointer; cursor: hand;" onclick="server.stop()"></div>
            </div>
            <div id="turet-container" style="position:relative;float:left;">
                <div style="position:relative; width: 200px; height:138px; background: url('images/control.jpg') 200px 0px;">
                  <div id="upArrow" style="position:absolute; left:75px; top: 10px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.turetStraight()"></div>
                  <div id="leftArrow" style="position:absolute; left:10px; top: 75px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.turetLeft()"></div>
                  <div id="rightArrow" style="position:absolute; left:135px; top: 79px; width: 50px; height: 50px; cursor: pointer; cursor: hand;" onclick="server.turetRight()"></div>
                </div>
            </div>
            <div style="clear:both"></div>
        </div>

        <input type="button" name="slow" value="slow" onclick="server.slow()">
        <p>
        <canvas id="routeCanvas" width="400" height="400"
style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>    
        <script>
            var connected = false;
            var server = null;
            var client = new Eureca.Client();
            var x = 0;
            var y = 0;
            
            // Client functions the server can call
             client.exports.status = function (text)
            {
                console.log("status text=" + text);
                $('#status').val(text);
            }
             client.exports.ping = function (text)
            {
                console.log("ping text=" + text);
                $('#ping').val(text);
            }             
             client.exports.setX = function (text)
            {
                x = text;
                console.log("x text=" + text);
                $('#x').val(text);
            }             
             client.exports.setY = function (text)
            {
                y = text;
                console.log("x text=" + text);
                $('#y').val(text);
            }             
             client.exports.heading = function (text)
            {
                console.log("heading text=" + text);
                $('#heading').val(text);
                drawLocation(x,y);
            }             
             client.exports.turet = function (text)
            {
                console.log("turet text=" + text);
                $('#turet').val(text);
            }             
            
            client.ready(function (proxy) {
                server = proxy;
                server.connect();
                connected = true;
                //server.hello();
            });

            function drawLocation(xin,yin) {
                
                xin = (xin * 100) + 200;
                yin = (yin * 100) + 200;
                
                var c = document.getElementById("routeCanvas");
                var ctx = c.getContext("2d");
                ctx.beginPath();
                ctx.arc(xin,yin,5,0,2*Math.PI);
                ctx.stroke();
            }
        </script>
    </body>
</html>